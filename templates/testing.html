{% extends 'base.html' %}

{% block title %}Testing Locations{% endblock %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="static/css/locations.css">
{% endblock %}
{% block content %}

<div class="site-header text-center">
    <div class="heading-row">
        <h1 id="testingsTitle">Testing Locations</h1>
    </div>
</div>
<div class="site-search">
    <div class="search-row">
        <p class="locations-p text-center">Search for testing locations by zipcode.</p>
        <form class="d-flex" action="/testing" method="GET" id="testingSearchForm">
            <input class="form-control me-2" type="search" placeholder="Search Zipcode" aria-label="Search" name="zip_code" id="zip_code" required>
            <button id="testingsearchButton" class="testing-search btn btn-button" type="submit">Find Testing</button>
        </form>
    </div>
</div>
{% block flash_message%}
<div class="error">
{% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul class="flashes alert alert-primary text-center" role="alert"">
        {% for message in messages %}
             <li>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
{% endwith %}
</div>
{% endblock %}
<div class="d-md-flex flex-md-equal w-100 my-md-3 ps-md-3">
    <div class="bg-light me-md-3 pt-3 px-3 pt-md-5 px-md-5 overflow-hidden">
        <div id="testingsResults">
            <form id="testing_content" action='/add_testing_site' method="post">
                {% for test_id, v in data.items() %}
                    <ul class="location-details">
                        <li class="facility-name">{{ v['alterate_name'] }}</li>
                        <li>
                            <i class="bi bi-geo-alt-fill"></i>{{ v['address'] }}
                            {{ v['address'] }}
                            {{ v['state_province'] }}
                            {{ v['zip_code'] }} 
                        </li>
                        <li><i class="bi bi-telephone-fill"></i> {{ v['phone_number'] }}</li> 
                        <li><i class="bi bi-calendar2-check-fill"></i> Appointment Required</li>
                        <li>
                            <button id="add_button" type="button" class="save_testing_location btn btn-button btn-width-auto" value="{{ test_id }}" ><i class="bi bi-bookmark-star"></i></button>
                        </li>
                    </ul>
                {% endfor %}
            </form>
        </div>
        <div id="test_info"></div>
    </div>

    <div class="bg-light me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden map">
        <div id="map"></div>
    </div>
</div>


{% endblock %}

{% block scripts %}
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBtmT9-GMRP4Aa7KYM6p6dDT_ieVdURI4Q&callback=initMap&libraries=&v=weekly" async></script>
    <script src="/static/js/testing.js"></script>
{% endblock %}